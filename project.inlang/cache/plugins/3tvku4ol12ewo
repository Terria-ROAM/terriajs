var Bt=Object.create;var kn=Object.defineProperty;var Ct=Object.getOwnPropertyDescriptor;var $t=Object.getOwnPropertyNames;var Kt=Object.getPrototypeOf,kt=Object.prototype.hasOwnProperty;var xn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Mt=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of $t(e))!kt.call(n,a)&&a!==t&&kn(n,a,{get:()=>e[a],enumerable:!(r=Ct(e,a))||r.enumerable});return n};var Sn=(n,e,t)=>(t=n!=null?Bt(Kt(n)):{},Mt(e||!n||!n.__esModule?kn(t,"default",{value:n,enumerable:!0}):t,n));var Dn=xn(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.Type=l.JsonType=l.JavaScriptTypeBuilder=l.JsonTypeBuilder=l.TypeBuilder=l.TypeBuilderError=l.TransformEncodeBuilder=l.TransformDecodeBuilder=l.TemplateLiteralDslParser=l.TemplateLiteralGenerator=l.TemplateLiteralGeneratorError=l.TemplateLiteralFinite=l.TemplateLiteralFiniteError=l.TemplateLiteralParser=l.TemplateLiteralParserError=l.TemplateLiteralResolver=l.TemplateLiteralPattern=l.TemplateLiteralPatternError=l.UnionResolver=l.KeyArrayResolver=l.KeyArrayResolverError=l.KeyResolver=l.ObjectMap=l.Intrinsic=l.IndexedAccessor=l.TypeClone=l.TypeExtends=l.TypeExtendsResult=l.TypeExtendsError=l.ExtendsUndefined=l.TypeGuard=l.TypeGuardUnknownTypeError=l.ValueGuard=l.FormatRegistry=l.TypeBoxError=l.TypeRegistry=l.PatternStringExact=l.PatternNumberExact=l.PatternBooleanExact=l.PatternString=l.PatternNumber=l.PatternBoolean=l.Kind=l.Hint=l.Optional=l.Readonly=l.Transform=void 0;l.Transform=Symbol.for("TypeBox.Transform");l.Readonly=Symbol.for("TypeBox.Readonly");l.Optional=Symbol.for("TypeBox.Optional");l.Hint=Symbol.for("TypeBox.Hint");l.Kind=Symbol.for("TypeBox.Kind");l.PatternBoolean="(true|false)";l.PatternNumber="(0|[1-9][0-9]*)";l.PatternString="(.*)";l.PatternBooleanExact=`^${l.PatternBoolean}$`;l.PatternNumberExact=`^${l.PatternNumber}$`;l.PatternStringExact=`^${l.PatternString}$`;var Un;(function(n){let e=new Map;function t(){return new Map(e)}n.Entries=t;function r(){return e.clear()}n.Clear=r;function a(d){return e.delete(d)}n.Delete=a;function s(d){return e.has(d)}n.Has=s;function c(d,b){e.set(d,b)}n.Set=c;function p(d){return e.get(d)}n.Get=p})(Un||(l.TypeRegistry=Un={}));var J=class extends Error{constructor(e){super(e)}};l.TypeBoxError=J;var Mn;(function(n){let e=new Map;function t(){return new Map(e)}n.Entries=t;function r(){return e.clear()}n.Clear=r;function a(d){return e.delete(d)}n.Delete=a;function s(d){return e.has(d)}n.Has=s;function c(d,b){e.set(d,b)}n.Set=c;function p(d){return e.get(d)}n.Get=p})(Mn||(l.FormatRegistry=Mn={}));var O;(function(n){function e(g){return Array.isArray(g)}n.IsArray=e;function t(g){return typeof g=="bigint"}n.IsBigInt=t;function r(g){return typeof g=="boolean"}n.IsBoolean=r;function a(g){return g instanceof globalThis.Date}n.IsDate=a;function s(g){return g===null}n.IsNull=s;function c(g){return typeof g=="number"}n.IsNumber=c;function p(g){return typeof g=="object"&&g!==null}n.IsObject=p;function d(g){return typeof g=="string"}n.IsString=d;function b(g){return g instanceof globalThis.Uint8Array}n.IsUint8Array=b;function m(g){return g===void 0}n.IsUndefined=m})(O||(l.ValueGuard=O={}));var En=class extends J{};l.TypeGuardUnknownTypeError=En;var f;(function(n){function e(u){try{return new RegExp(u),!0}catch{return!1}}function t(u){if(!O.IsString(u))return!1;for(let B=0;B<u.length;B++){let q=u.charCodeAt(B);if(q>=7&&q<=13||q===27||q===127)return!1}return!0}function r(u){return c(u)||k(u)}function a(u){return O.IsUndefined(u)||O.IsBigInt(u)}function s(u){return O.IsUndefined(u)||O.IsNumber(u)}function c(u){return O.IsUndefined(u)||O.IsBoolean(u)}function p(u){return O.IsUndefined(u)||O.IsString(u)}function d(u){return O.IsUndefined(u)||O.IsString(u)&&t(u)&&e(u)}function b(u){return O.IsUndefined(u)||O.IsString(u)&&t(u)}function m(u){return O.IsUndefined(u)||k(u)}function g(u){return L(u,"Any")&&p(u.$id)}n.TAny=g;function P(u){return L(u,"Array")&&u.type==="array"&&p(u.$id)&&k(u.items)&&s(u.minItems)&&s(u.maxItems)&&c(u.uniqueItems)&&m(u.contains)&&s(u.minContains)&&s(u.maxContains)}n.TArray=P;function y(u){return L(u,"AsyncIterator")&&u.type==="AsyncIterator"&&p(u.$id)&&k(u.items)}n.TAsyncIterator=y;function I(u){return L(u,"BigInt")&&u.type==="bigint"&&p(u.$id)&&a(u.exclusiveMaximum)&&a(u.exclusiveMinimum)&&a(u.maximum)&&a(u.minimum)&&a(u.multipleOf)}n.TBigInt=I;function S(u){return L(u,"Boolean")&&u.type==="boolean"&&p(u.$id)}n.TBoolean=S;function E(u){return L(u,"Constructor")&&u.type==="Constructor"&&p(u.$id)&&O.IsArray(u.parameters)&&u.parameters.every(B=>k(B))&&k(u.returns)}n.TConstructor=E;function R(u){return L(u,"Date")&&u.type==="Date"&&p(u.$id)&&s(u.exclusiveMaximumTimestamp)&&s(u.exclusiveMinimumTimestamp)&&s(u.maximumTimestamp)&&s(u.minimumTimestamp)&&s(u.multipleOfTimestamp)}n.TDate=R;function j(u){return L(u,"Function")&&u.type==="Function"&&p(u.$id)&&O.IsArray(u.parameters)&&u.parameters.every(B=>k(B))&&k(u.returns)}n.TFunction=j;function A(u){return L(u,"Integer")&&u.type==="integer"&&p(u.$id)&&s(u.exclusiveMaximum)&&s(u.exclusiveMinimum)&&s(u.maximum)&&s(u.minimum)&&s(u.multipleOf)}n.TInteger=A;function $(u){return L(u,"Intersect")&&!(O.IsString(u.type)&&u.type!=="object")&&O.IsArray(u.allOf)&&u.allOf.every(B=>k(B)&&!we(B))&&p(u.type)&&(c(u.unevaluatedProperties)||m(u.unevaluatedProperties))&&p(u.$id)}n.TIntersect=$;function Y(u){return L(u,"Iterator")&&u.type==="Iterator"&&p(u.$id)&&k(u.items)}n.TIterator=Y;function L(u,B){return ne(u)&&u[l.Kind]===B}n.TKindOf=L;function ne(u){return O.IsObject(u)&&l.Kind in u&&O.IsString(u[l.Kind])}n.TKind=ne;function H(u){return X(u)&&O.IsString(u.const)}n.TLiteralString=H;function Be(u){return X(u)&&O.IsNumber(u.const)}n.TLiteralNumber=Be;function bn(u){return X(u)&&O.IsBoolean(u.const)}n.TLiteralBoolean=bn;function X(u){return L(u,"Literal")&&p(u.$id)&&(O.IsBoolean(u.const)||O.IsNumber(u.const)||O.IsString(u.const))}n.TLiteral=X;function Ce(u){return L(u,"Never")&&O.IsObject(u.not)&&Object.getOwnPropertyNames(u.not).length===0}n.TNever=Ce;function M(u){return L(u,"Not")&&k(u.not)}n.TNot=M;function Oe(u){return L(u,"Null")&&u.type==="null"&&p(u.$id)}n.TNull=Oe;function Ie(u){return L(u,"Number")&&u.type==="number"&&p(u.$id)&&s(u.exclusiveMaximum)&&s(u.exclusiveMinimum)&&s(u.maximum)&&s(u.minimum)&&s(u.multipleOf)}n.TNumber=Ie;function ce(u){return L(u,"Object")&&u.type==="object"&&p(u.$id)&&O.IsObject(u.properties)&&r(u.additionalProperties)&&s(u.minProperties)&&s(u.maxProperties)&&Object.entries(u.properties).every(([B,q])=>t(B)&&k(q))}n.TObject=ce;function Pe(u){return L(u,"Promise")&&u.type==="Promise"&&p(u.$id)&&k(u.item)}n.TPromise=Pe;function $e(u){return L(u,"Record")&&u.type==="object"&&p(u.$id)&&r(u.additionalProperties)&&O.IsObject(u.patternProperties)&&(B=>{let q=Object.getOwnPropertyNames(B.patternProperties);return q.length===1&&e(q[0])&&O.IsObject(B.patternProperties)&&k(B.patternProperties[q[0]])})(u)}n.TRecord=$e;function vn(u){return O.IsObject(u)&&l.Hint in u&&u[l.Hint]==="Recursive"}n.TRecursive=vn;function Ke(u){return L(u,"Ref")&&p(u.$id)&&O.IsString(u.$ref)}n.TRef=Ke;function ke(u){return L(u,"String")&&u.type==="string"&&p(u.$id)&&s(u.minLength)&&s(u.maxLength)&&d(u.pattern)&&b(u.format)}n.TString=ke;function Me(u){return L(u,"Symbol")&&u.type==="symbol"&&p(u.$id)}n.TSymbol=Me;function te(u){return L(u,"TemplateLiteral")&&u.type==="string"&&O.IsString(u.pattern)&&u.pattern[0]==="^"&&u.pattern[u.pattern.length-1]==="$"}n.TTemplateLiteral=te;function _e(u){return L(u,"This")&&p(u.$id)&&O.IsString(u.$ref)}n.TThis=_e;function we(u){return O.IsObject(u)&&l.Transform in u}n.TTransform=we;function K(u){return L(u,"Tuple")&&u.type==="array"&&p(u.$id)&&O.IsNumber(u.minItems)&&O.IsNumber(u.maxItems)&&u.minItems===u.maxItems&&(O.IsUndefined(u.items)&&O.IsUndefined(u.additionalItems)&&u.minItems===0||O.IsArray(u.items)&&u.items.every(B=>k(B)))}n.TTuple=K;function De(u){return L(u,"Undefined")&&u.type==="undefined"&&p(u.$id)}n.TUndefined=De;function On(u){return re(u)&&u.anyOf.every(B=>H(B)||Be(B))}n.TUnionLiteral=On;function re(u){return L(u,"Union")&&p(u.$id)&&O.IsObject(u)&&O.IsArray(u.anyOf)&&u.anyOf.every(B=>k(B))}n.TUnion=re;function le(u){return L(u,"Uint8Array")&&u.type==="Uint8Array"&&p(u.$id)&&s(u.minByteLength)&&s(u.maxByteLength)}n.TUint8Array=le;function _(u){return L(u,"Unknown")&&p(u.$id)}n.TUnknown=_;function he(u){return L(u,"Unsafe")}n.TUnsafe=he;function xe(u){return L(u,"Void")&&u.type==="void"&&p(u.$id)}n.TVoid=xe;function In(u){return O.IsObject(u)&&u[l.Readonly]==="Readonly"}n.TReadonly=In;function Pn(u){return O.IsObject(u)&&u[l.Optional]==="Optional"}n.TOptional=Pn;function k(u){return O.IsObject(u)&&(g(u)||P(u)||S(u)||I(u)||y(u)||E(u)||R(u)||j(u)||A(u)||$(u)||Y(u)||X(u)||Ce(u)||M(u)||Oe(u)||Ie(u)||ce(u)||Pe(u)||$e(u)||Ke(u)||ke(u)||Me(u)||te(u)||_e(u)||K(u)||De(u)||re(u)||le(u)||_(u)||he(u)||xe(u)||ne(u)&&Un.Has(u[l.Kind]))}n.TSchema=k})(f||(l.TypeGuard=f={}));var _n;(function(n){function e(t){return t[l.Kind]==="Intersect"?t.allOf.every(r=>e(r)):t[l.Kind]==="Union"?t.anyOf.some(r=>e(r)):t[l.Kind]==="Undefined"?!0:t[l.Kind]==="Not"?!e(t.not):!1}n.Check=e})(_n||(l.ExtendsUndefined=_n={}));var qe=class extends J{};l.TypeExtendsError=qe;var T;(function(n){n[n.Union=0]="Union",n[n.True=1]="True",n[n.False=2]="False"})(T||(l.TypeExtendsResult=T={}));var ie;(function(n){function e(i){return i===T.False?i:T.True}function t(i){throw new qe(i)}function r(i){return f.TNever(i)||f.TIntersect(i)||f.TUnion(i)||f.TUnknown(i)||f.TAny(i)}function a(i,o){return f.TNever(o)?L(i,o):f.TIntersect(o)?j(i,o):f.TUnion(o)?wn(i,o):f.TUnknown(o)?Kn(i,o):f.TAny(o)?s(i,o):t("StructuralRight")}function s(i,o){return T.True}function c(i,o){return f.TIntersect(o)?j(i,o):f.TUnion(o)&&o.anyOf.some(N=>f.TAny(N)||f.TUnknown(N))?T.True:f.TUnion(o)?T.Union:f.TUnknown(o)||f.TAny(o)?T.True:T.Union}function p(i,o){return f.TUnknown(i)?T.False:f.TAny(i)?T.Union:f.TNever(i)?T.True:T.False}function d(i,o){return f.TObject(o)&&te(o)?T.True:r(o)?a(i,o):f.TArray(o)?e(F(i.items,o.items)):T.False}function b(i,o){return r(o)?a(i,o):f.TAsyncIterator(o)?e(F(i.items,o.items)):T.False}function m(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TBigInt(o)?T.True:T.False}function g(i,o){return f.TLiteral(i)&&O.IsBoolean(i.const)||f.TBoolean(i)?T.True:T.False}function P(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TBoolean(o)?T.True:T.False}function y(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TConstructor(o)?i.parameters.length>o.parameters.length?T.False:i.parameters.every((N,z)=>e(F(o.parameters[z],N))===T.True)?e(F(i.returns,o.returns)):T.False:T.False}function I(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TDate(o)?T.True:T.False}function S(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TFunction(o)?i.parameters.length>o.parameters.length?T.False:i.parameters.every((N,z)=>e(F(o.parameters[z],N))===T.True)?e(F(i.returns,o.returns)):T.False:T.False}function E(i,o){return f.TLiteral(i)&&O.IsNumber(i.const)||f.TNumber(i)||f.TInteger(i)?T.True:T.False}function R(i,o){return f.TInteger(o)||f.TNumber(o)?T.True:r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):T.False}function j(i,o){return o.allOf.every(N=>F(i,N)===T.True)?T.True:T.False}function A(i,o){return i.allOf.some(N=>F(N,o)===T.True)?T.True:T.False}function $(i,o){return r(o)?a(i,o):f.TIterator(o)?e(F(i.items,o.items)):T.False}function Y(i,o){return f.TLiteral(o)&&o.const===i.const?T.True:r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TString(o)?xe(i,o):f.TNumber(o)?X(i,o):f.TInteger(o)?E(i,o):f.TBoolean(o)?g(i,o):T.False}function L(i,o){return T.False}function ne(i,o){return T.True}function H(i){let[o,N]=[i,0];for(;f.TNot(o);)o=o.not,N+=1;return N%2===0?o:l.Type.Unknown()}function Be(i,o){return f.TNot(i)?F(H(i),o):f.TNot(o)?F(i,H(o)):t("Invalid fallthrough for Not")}function bn(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TNull(o)?T.True:T.False}function X(i,o){return f.TLiteralNumber(i)||f.TNumber(i)||f.TInteger(i)?T.True:T.False}function Ce(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TInteger(o)||f.TNumber(o)?T.True:T.False}function M(i,o){return Object.getOwnPropertyNames(i.properties).length===o}function Oe(i){return te(i)}function Ie(i){return M(i,0)||M(i,1)&&"description"in i.properties&&f.TUnion(i.properties.description)&&i.properties.description.anyOf.length===2&&(f.TString(i.properties.description.anyOf[0])&&f.TUndefined(i.properties.description.anyOf[1])||f.TString(i.properties.description.anyOf[1])&&f.TUndefined(i.properties.description.anyOf[0]))}function ce(i){return M(i,0)}function Pe(i){return M(i,0)}function $e(i){return M(i,0)}function vn(i){return M(i,0)}function Ke(i){return te(i)}function ke(i){let o=l.Type.Number();return M(i,0)||M(i,1)&&"length"in i.properties&&e(F(i.properties.length,o))===T.True}function Me(i){return M(i,0)}function te(i){let o=l.Type.Number();return M(i,0)||M(i,1)&&"length"in i.properties&&e(F(i.properties.length,o))===T.True}function _e(i){let o=l.Type.Function([l.Type.Any()],l.Type.Any());return M(i,0)||M(i,1)&&"then"in i.properties&&e(F(i.properties.then,o))===T.True}function we(i,o){return F(i,o)===T.False||f.TOptional(i)&&!f.TOptional(o)?T.False:T.True}function K(i,o){return f.TUnknown(i)?T.False:f.TAny(i)?T.Union:f.TNever(i)||f.TLiteralString(i)&&Oe(o)||f.TLiteralNumber(i)&&ce(o)||f.TLiteralBoolean(i)&&Pe(o)||f.TSymbol(i)&&Ie(o)||f.TBigInt(i)&&$e(o)||f.TString(i)&&Oe(o)||f.TSymbol(i)&&Ie(o)||f.TNumber(i)&&ce(o)||f.TInteger(i)&&ce(o)||f.TBoolean(i)&&Pe(o)||f.TUint8Array(i)&&Ke(o)||f.TDate(i)&&vn(o)||f.TConstructor(i)&&Me(o)||f.TFunction(i)&&ke(o)?T.True:f.TRecord(i)&&f.TString(re(i))?o[l.Hint]==="Record"?T.True:T.False:f.TRecord(i)&&f.TNumber(re(i))?M(o,0)?T.True:T.False:T.False}function De(i,o){return r(o)?a(i,o):f.TRecord(o)?_(i,o):f.TObject(o)?(()=>{for(let N of Object.getOwnPropertyNames(o.properties)){if(!(N in i.properties)&&!f.TOptional(o.properties[N]))return T.False;if(f.TOptional(o.properties[N]))return T.True;if(we(i.properties[N],o.properties[N])===T.False)return T.False}return T.True})():T.False}function On(i,o){return r(o)?a(i,o):f.TObject(o)&&_e(o)?T.True:f.TPromise(o)?e(F(i.item,o.item)):T.False}function re(i){return l.PatternNumberExact in i.patternProperties?l.Type.Number():l.PatternStringExact in i.patternProperties?l.Type.String():t("Unknown record key pattern")}function le(i){return l.PatternNumberExact in i.patternProperties?i.patternProperties[l.PatternNumberExact]:l.PatternStringExact in i.patternProperties?i.patternProperties[l.PatternStringExact]:t("Unable to get record value schema")}function _(i,o){let[N,z]=[re(o),le(o)];return f.TLiteralString(i)&&f.TNumber(N)&&e(F(i,z))===T.True?T.True:f.TUint8Array(i)&&f.TNumber(N)||f.TString(i)&&f.TNumber(N)||f.TArray(i)&&f.TNumber(N)?F(i,z):f.TObject(i)?(()=>{for(let Ft of Object.getOwnPropertyNames(i.properties))if(we(z,i.properties[Ft])===T.False)return T.False;return T.True})():T.False}function he(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?F(le(i),le(o)):T.False}function xe(i,o){return f.TLiteral(i)&&O.IsString(i.const)||f.TString(i)?T.True:T.False}function In(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TString(o)?T.True:T.False}function Pn(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TSymbol(o)?T.True:T.False}function k(i,o){return f.TTemplateLiteral(i)?F(Q.Resolve(i),o):f.TTemplateLiteral(o)?F(i,Q.Resolve(o)):t("Invalid fallthrough for TemplateLiteral")}function u(i,o){return f.TArray(o)&&i.items!==void 0&&i.items.every(N=>F(N,o.items)===T.True)}function B(i,o){return f.TNever(i)?T.True:f.TUnknown(i)?T.False:f.TAny(i)?T.Union:T.False}function q(i,o){return r(o)?a(i,o):f.TObject(o)&&te(o)||f.TArray(o)&&u(i,o)?T.True:f.TTuple(o)?O.IsUndefined(i.items)&&!O.IsUndefined(o.items)||!O.IsUndefined(i.items)&&O.IsUndefined(o.items)?T.False:O.IsUndefined(i.items)&&!O.IsUndefined(o.items)||i.items.every((N,z)=>F(N,o.items[z])===T.True)?T.True:T.False:T.False}function Ut(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TUint8Array(o)?T.True:T.False}function Et(i,o){return r(o)?a(i,o):f.TObject(o)?K(i,o):f.TRecord(o)?_(i,o):f.TVoid(o)?Rt(i,o):f.TUndefined(o)?T.True:T.False}function wn(i,o){return o.anyOf.some(N=>F(i,N)===T.True)?T.True:T.False}function Lt(i,o){return i.anyOf.every(N=>F(N,o)===T.True)?T.True:T.False}function Kn(i,o){return T.True}function jt(i,o){return f.TNever(o)?L(i,o):f.TIntersect(o)?j(i,o):f.TUnion(o)?wn(i,o):f.TAny(o)?s(i,o):f.TString(o)?xe(i,o):f.TNumber(o)?X(i,o):f.TInteger(o)?E(i,o):f.TBoolean(o)?g(i,o):f.TArray(o)?p(i,o):f.TTuple(o)?B(i,o):f.TObject(o)?K(i,o):f.TUnknown(o)?T.True:T.False}function Rt(i,o){return f.TUndefined(i)||f.TUndefined(i)?T.True:T.False}function Nt(i,o){return f.TIntersect(o)?j(i,o):f.TUnion(o)?wn(i,o):f.TUnknown(o)?Kn(i,o):f.TAny(o)?s(i,o):f.TObject(o)?K(i,o):f.TVoid(o)?T.True:T.False}function F(i,o){return f.TTemplateLiteral(i)||f.TTemplateLiteral(o)?k(i,o):f.TNot(i)||f.TNot(o)?Be(i,o):f.TAny(i)?c(i,o):f.TArray(i)?d(i,o):f.TBigInt(i)?m(i,o):f.TBoolean(i)?P(i,o):f.TAsyncIterator(i)?b(i,o):f.TConstructor(i)?y(i,o):f.TDate(i)?I(i,o):f.TFunction(i)?S(i,o):f.TInteger(i)?R(i,o):f.TIntersect(i)?A(i,o):f.TIterator(i)?$(i,o):f.TLiteral(i)?Y(i,o):f.TNever(i)?ne(i,o):f.TNull(i)?bn(i,o):f.TNumber(i)?Ce(i,o):f.TObject(i)?De(i,o):f.TRecord(i)?he(i,o):f.TString(i)?In(i,o):f.TSymbol(i)?Pn(i,o):f.TTuple(i)?q(i,o):f.TPromise(i)?On(i,o):f.TUint8Array(i)?Ut(i,o):f.TUndefined(i)?Et(i,o):f.TUnion(i)?Lt(i,o):f.TUnknown(i)?jt(i,o):f.TVoid(i)?Nt(i,o):t(`Unknown left type operand '${i[l.Kind]}'`)}function At(i,o){return F(i,o)}n.Extends=At})(ie||(l.TypeExtends=ie={}));var w;(function(n){function e(d){return d.map(b=>s(b))}function t(d){return new Date(d.getTime())}function r(d){return new Uint8Array(d)}function a(d){let b=Object.getOwnPropertyNames(d).reduce((g,P)=>({...g,[P]:s(d[P])}),{}),m=Object.getOwnPropertySymbols(d).reduce((g,P)=>({...g,[P]:s(d[P])}),{});return{...b,...m}}function s(d){return O.IsArray(d)?e(d):O.IsDate(d)?t(d):O.IsUint8Array(d)?r(d):O.IsObject(d)?a(d):d}function c(d){return d.map(b=>p(b))}n.Rest=c;function p(d,b={}){return{...s(d),...b}}n.Type=p})(w||(l.TypeClone=w={}));var Ln;(function(n){function e(y){return y.map(I=>{let{[l.Optional]:S,...E}=w.Type(I);return E})}function t(y){return y.every(I=>f.TOptional(I))}function r(y){return y.some(I=>f.TOptional(I))}function a(y){return t(y.allOf)?l.Type.Optional(l.Type.Intersect(e(y.allOf))):y}function s(y){return r(y.anyOf)?l.Type.Optional(l.Type.Union(e(y.anyOf))):y}function c(y){return y[l.Kind]==="Intersect"?a(y):y[l.Kind]==="Union"?s(y):y}function p(y,I){let S=y.allOf.reduce((E,R)=>{let j=g(R,I);return j[l.Kind]==="Never"?E:[...E,j]},[]);return c(l.Type.Intersect(S))}function d(y,I){let S=y.anyOf.map(E=>g(E,I));return c(l.Type.Union(S))}function b(y,I){let S=y.properties[I];return O.IsUndefined(S)?l.Type.Never():l.Type.Union([S])}function m(y,I){let S=y.items;if(O.IsUndefined(S))return l.Type.Never();let E=S[I];return O.IsUndefined(E)?l.Type.Never():E}function g(y,I){return y[l.Kind]==="Intersect"?p(y,I):y[l.Kind]==="Union"?d(y,I):y[l.Kind]==="Object"?b(y,I):y[l.Kind]==="Tuple"?m(y,I):l.Type.Never()}function P(y,I,S={}){let E=I.map(R=>g(y,R.toString()));return c(l.Type.Union(E,S))}n.Resolve=P})(Ln||(l.IndexedAccessor=Ln={}));var fe;(function(n){function e(m){let[g,P]=[m.slice(0,1),m.slice(1)];return`${g.toLowerCase()}${P}`}function t(m){let[g,P]=[m.slice(0,1),m.slice(1)];return`${g.toUpperCase()}${P}`}function r(m){return m.toUpperCase()}function a(m){return m.toLowerCase()}function s(m,g){let P=de.ParseExact(m.pattern);if(!Te.Check(P))return{...m,pattern:c(m.pattern,g)};let S=[...ye.Generate(P)].map(j=>l.Type.Literal(j)),E=p(S,g),R=l.Type.Union(E);return l.Type.TemplateLiteral([R])}function c(m,g){return typeof m=="string"?g==="Uncapitalize"?e(m):g==="Capitalize"?t(m):g==="Uppercase"?r(m):g==="Lowercase"?a(m):m:m.toString()}function p(m,g){if(m.length===0)return[];let[P,...y]=m;return[b(P,g),...p(y,g)]}function d(m,g){return f.TTemplateLiteral(m)?s(m,g):f.TUnion(m)?l.Type.Union(p(m.anyOf,g)):f.TLiteral(m)?l.Type.Literal(c(m.const,g)):m}function b(m,g){return d(m,g)}n.Map=b})(fe||(l.Intrinsic=fe={}));var pe;(function(n){function e(c,p){return l.Type.Intersect(c.allOf.map(d=>a(d,p)),{...c})}function t(c,p){return l.Type.Union(c.anyOf.map(d=>a(d,p)),{...c})}function r(c,p){return p(c)}function a(c,p){return c[l.Kind]==="Intersect"?e(c,p):c[l.Kind]==="Union"?t(c,p):c[l.Kind]==="Object"?r(c,p):c}function s(c,p,d){return{...a(w.Type(c),p),...d}}n.Map=s})(pe||(l.ObjectMap=pe={}));var Ve;(function(n){function e(b){return b[0]==="^"&&b[b.length-1]==="$"?b.slice(1,b.length-1):b}function t(b,m){return b.allOf.reduce((g,P)=>[...g,...c(P,m)],[])}function r(b,m){let g=b.anyOf.map(P=>c(P,m));return[...g.reduce((P,y)=>y.map(I=>g.every(S=>S.includes(I))?P.add(I):P)[0],new Set)]}function a(b,m){return Object.getOwnPropertyNames(b.properties)}function s(b,m){return m.includePatterns?Object.getOwnPropertyNames(b.patternProperties):[]}function c(b,m){return f.TIntersect(b)?t(b,m):f.TUnion(b)?r(b,m):f.TObject(b)?a(b,m):f.TRecord(b)?s(b,m):[]}function p(b,m){return[...new Set(c(b,m))]}n.ResolveKeys=p;function d(b){return`^(${p(b,{includePatterns:!0}).map(P=>`(${e(P)})`).join("|")})$`}n.ResolvePattern=d})(Ve||(l.KeyResolver=Ve={}));var ze=class extends J{};l.KeyArrayResolverError=ze;var Se;(function(n){function e(t){return Array.isArray(t)?t:f.TUnionLiteral(t)?t.anyOf.map(r=>r.const.toString()):f.TLiteral(t)?[t.const]:f.TTemplateLiteral(t)?(()=>{let r=de.ParseExact(t.pattern);if(!Te.Check(r))throw new ze("Cannot resolve keys from infinite template expression");return[...ye.Generate(r)]})():[]}n.Resolve=e})(Se||(l.KeyArrayResolver=Se={}));var jn;(function(n){function*e(r){for(let a of r.anyOf)a[l.Kind]==="Union"?yield*e(a):yield a}function t(r){return l.Type.Union([...e(r)],{...r})}n.Resolve=t})(jn||(l.UnionResolver=jn={}));var Je=class extends J{};l.TemplateLiteralPatternError=Je;var We;(function(n){function e(s){throw new Je(s)}function t(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(s,c){return f.TTemplateLiteral(s)?s.pattern.slice(1,s.pattern.length-1):f.TUnion(s)?`(${s.anyOf.map(p=>r(p,c)).join("|")})`:f.TNumber(s)?`${c}${l.PatternNumber}`:f.TInteger(s)?`${c}${l.PatternNumber}`:f.TBigInt(s)?`${c}${l.PatternNumber}`:f.TString(s)?`${c}${l.PatternString}`:f.TLiteral(s)?`${c}${t(s.const.toString())}`:f.TBoolean(s)?`${c}${l.PatternBoolean}`:e(`Unexpected Kind '${s[l.Kind]}'`)}function a(s){return`^${s.map(c=>r(c,"")).join("")}$`}n.Create=a})(We||(l.TemplateLiteralPattern=We={}));var Q;(function(n){function e(t){let r=de.ParseExact(t.pattern);if(!Te.Check(r))return l.Type.String();let a=[...ye.Generate(r)].map(s=>l.Type.Literal(s));return l.Type.Union(a)}n.Resolve=e})(Q||(l.TemplateLiteralResolver=Q={}));var Ue=class extends J{};l.TemplateLiteralParserError=Ue;var de;(function(n){function e(y,I,S){return y[I]===S&&y.charCodeAt(I-1)!==92}function t(y,I){return e(y,I,"(")}function r(y,I){return e(y,I,")")}function a(y,I){return e(y,I,"|")}function s(y){if(!(t(y,0)&&r(y,y.length-1)))return!1;let I=0;for(let S=0;S<y.length;S++)if(t(y,S)&&(I+=1),r(y,S)&&(I-=1),I===0&&S!==y.length-1)return!1;return!0}function c(y){return y.slice(1,y.length-1)}function p(y){let I=0;for(let S=0;S<y.length;S++)if(t(y,S)&&(I+=1),r(y,S)&&(I-=1),a(y,S)&&I===0)return!0;return!1}function d(y){for(let I=0;I<y.length;I++)if(t(y,I))return!0;return!1}function b(y){let[I,S]=[0,0],E=[];for(let j=0;j<y.length;j++)if(t(y,j)&&(I+=1),r(y,j)&&(I-=1),a(y,j)&&I===0){let A=y.slice(S,j);A.length>0&&E.push(g(A)),S=j+1}let R=y.slice(S);return R.length>0&&E.push(g(R)),E.length===0?{type:"const",const:""}:E.length===1?E[0]:{type:"or",expr:E}}function m(y){function I(R,j){if(!t(R,j))throw new Ue("TemplateLiteralParser: Index must point to open parens");let A=0;for(let $=j;$<R.length;$++)if(t(R,$)&&(A+=1),r(R,$)&&(A-=1),A===0)return[j,$];throw new Ue("TemplateLiteralParser: Unclosed group parens in expression")}function S(R,j){for(let A=j;A<R.length;A++)if(t(R,A))return[j,A];return[j,R.length]}let E=[];for(let R=0;R<y.length;R++)if(t(y,R)){let[j,A]=I(y,R),$=y.slice(j,A+1);E.push(g($)),R=A}else{let[j,A]=S(y,R),$=y.slice(j,A);$.length>0&&E.push(g($)),R=A-1}return E.length===0?{type:"const",const:""}:E.length===1?E[0]:{type:"and",expr:E}}function g(y){return s(y)?g(c(y)):p(y)?b(y):d(y)?m(y):{type:"const",const:y}}n.Parse=g;function P(y){return g(y.slice(1,y.length-1))}n.ParseExact=P})(de||(l.TemplateLiteralParser=de={}));var He=class extends J{};l.TemplateLiteralFiniteError=He;var Te;(function(n){function e(c){throw new He(c)}function t(c){return c.type==="or"&&c.expr.length===2&&c.expr[0].type==="const"&&c.expr[0].const==="0"&&c.expr[1].type==="const"&&c.expr[1].const==="[1-9][0-9]*"}function r(c){return c.type==="or"&&c.expr.length===2&&c.expr[0].type==="const"&&c.expr[0].const==="true"&&c.expr[1].type==="const"&&c.expr[1].const==="false"}function a(c){return c.type==="const"&&c.const===".*"}function s(c){return r(c)?!0:t(c)||a(c)?!1:c.type==="and"?c.expr.every(p=>s(p)):c.type==="or"?c.expr.every(p=>s(p)):c.type==="const"?!0:e("Unknown expression type")}n.Check=s})(Te||(l.TemplateLiteralFinite=Te={}));var Qe=class extends J{};l.TemplateLiteralGeneratorError=Qe;var ye;(function(n){function*e(c){if(c.length===1)return yield*c[0];for(let p of c[0])for(let d of e(c.slice(1)))yield`${p}${d}`}function*t(c){return yield*e(c.expr.map(p=>[...s(p)]))}function*r(c){for(let p of c.expr)yield*s(p)}function*a(c){return yield c.const}function*s(c){return c.type==="and"?yield*t(c):c.type==="or"?yield*r(c):c.type==="const"?yield*a(c):(()=>{throw new Qe("Unknown expression")})()}n.Generate=s})(ye||(l.TemplateLiteralGenerator=ye={}));var Rn;(function(n){function*e(s){let c=s.trim().replace(/"|'/g,"");return c==="boolean"?yield l.Type.Boolean():c==="number"?yield l.Type.Number():c==="bigint"?yield l.Type.BigInt():c==="string"?yield l.Type.String():yield(()=>{let p=c.split("|").map(d=>l.Type.Literal(d.trim()));return p.length===0?l.Type.Never():p.length===1?p[0]:l.Type.Union(p)})()}function*t(s){if(s[1]!=="{"){let c=l.Type.Literal("$"),p=r(s.slice(1));return yield*[c,...p]}for(let c=2;c<s.length;c++)if(s[c]==="}"){let p=e(s.slice(2,c)),d=r(s.slice(c+1));return yield*[...p,...d]}yield l.Type.Literal(s)}function*r(s){for(let c=0;c<s.length;c++)if(s[c]==="$"){let p=l.Type.Literal(s.slice(0,c)),d=t(s.slice(c));return yield*[p,...d]}yield l.Type.Literal(s)}function a(s){return[...r(s)]}n.Parse=a})(Rn||(l.TemplateLiteralDslParser=Rn={}));var Ze=class{constructor(e){this.schema=e}Decode(e){return new Ye(this.schema,e)}};l.TransformDecodeBuilder=Ze;var Ye=class{constructor(e,t){this.schema=e,this.decode=t}Encode(e){let t=w.Type(this.schema);return f.TTransform(t)?(()=>{let s={Encode:c=>t[l.Transform].Encode(e(c)),Decode:c=>this.decode(t[l.Transform].Decode(c))};return{...t,[l.Transform]:s}})():(()=>{let r={Decode:this.decode,Encode:e};return{...t,[l.Transform]:r}})()}};l.TransformEncodeBuilder=Ye;var _t=0,Xe=class extends J{};l.TypeBuilderError=Xe;var Ge=class{Create(e){return e}Throw(e){throw new Xe(e)}Discard(e,t){return t.reduce((r,a)=>{let{[a]:s,...c}=r;return c},e)}Strict(e){return JSON.parse(JSON.stringify(e))}};l.TypeBuilder=Ge;var Ee=class extends Ge{ReadonlyOptional(e){return this.Readonly(this.Optional(e))}Readonly(e){return{...w.Type(e),[l.Readonly]:"Readonly"}}Optional(e){return{...w.Type(e),[l.Optional]:"Optional"}}Any(e={}){return this.Create({...e,[l.Kind]:"Any"})}Array(e,t={}){return this.Create({...t,[l.Kind]:"Array",type:"array",items:w.Type(e)})}Boolean(e={}){return this.Create({...e,[l.Kind]:"Boolean",type:"boolean"})}Capitalize(e,t={}){return{...fe.Map(w.Type(e),"Capitalize"),...t}}Composite(e,t){let r=l.Type.Intersect(e,{}),s=Ve.ResolveKeys(r,{includePatterns:!1}).reduce((c,p)=>({...c,[p]:l.Type.Index(r,[p])}),{});return l.Type.Object(s,t)}Enum(e,t={}){if(O.IsUndefined(e))return this.Throw("Enum undefined or empty");let r=Object.getOwnPropertyNames(e).filter(c=>isNaN(c)).map(c=>e[c]),s=[...new Set(r)].map(c=>l.Type.Literal(c));return this.Union(s,{...t,[l.Hint]:"Enum"})}Extends(e,t,r,a,s={}){switch(ie.Extends(e,t)){case T.Union:return this.Union([w.Type(r,s),w.Type(a,s)]);case T.True:return w.Type(r,s);case T.False:return w.Type(a,s)}}Exclude(e,t,r={}){return f.TTemplateLiteral(e)?this.Exclude(Q.Resolve(e),t,r):f.TTemplateLiteral(t)?this.Exclude(e,Q.Resolve(t),r):f.TUnion(e)?(()=>{let a=e.anyOf.filter(s=>ie.Extends(s,t)===T.False);return a.length===1?w.Type(a[0],r):this.Union(a,r)})():ie.Extends(e,t)!==T.False?this.Never(r):w.Type(e,r)}Extract(e,t,r={}){return f.TTemplateLiteral(e)?this.Extract(Q.Resolve(e),t,r):f.TTemplateLiteral(t)?this.Extract(e,Q.Resolve(t),r):f.TUnion(e)?(()=>{let a=e.anyOf.filter(s=>ie.Extends(s,t)!==T.False);return a.length===1?w.Type(a[0],r):this.Union(a,r)})():ie.Extends(e,t)!==T.False?w.Type(e,r):this.Never(r)}Index(e,t,r={}){return f.TArray(e)&&f.TNumber(t)?w.Type(e.items,r):f.TTuple(e)&&f.TNumber(t)?(()=>{let s=(O.IsUndefined(e.items)?[]:e.items).map(c=>w.Type(c));return this.Union(s,r)})():(()=>{let a=Se.Resolve(t),s=w.Type(e);return Ln.Resolve(s,a,r)})()}Integer(e={}){return this.Create({...e,[l.Kind]:"Integer",type:"integer"})}Intersect(e,t={}){if(e.length===0)return l.Type.Never();if(e.length===1)return w.Type(e[0],t);e.some(c=>f.TTransform(c))&&this.Throw("Cannot intersect transform types");let r=e.every(c=>f.TObject(c)),a=w.Rest(e),s=f.TSchema(t.unevaluatedProperties)?{unevaluatedProperties:w.Type(t.unevaluatedProperties)}:{};return t.unevaluatedProperties===!1||f.TSchema(t.unevaluatedProperties)||r?this.Create({...t,...s,[l.Kind]:"Intersect",type:"object",allOf:a}):this.Create({...t,...s,[l.Kind]:"Intersect",allOf:a})}KeyOf(e,t={}){return f.TRecord(e)?(()=>{let r=Object.getOwnPropertyNames(e.patternProperties)[0];return r===l.PatternNumberExact?this.Number(t):r===l.PatternStringExact?this.String(t):this.Throw("Unable to resolve key type from Record key pattern")})():f.TTuple(e)?(()=>{let a=(O.IsUndefined(e.items)?[]:e.items).map((s,c)=>l.Type.Literal(c.toString()));return this.Union(a,t)})():f.TArray(e)?this.Number(t):(()=>{let r=Ve.ResolveKeys(e,{includePatterns:!1});if(r.length===0)return this.Never(t);let a=r.map(s=>this.Literal(s));return this.Union(a,t)})()}Literal(e,t={}){return this.Create({...t,[l.Kind]:"Literal",const:e,type:typeof e})}Lowercase(e,t={}){return{...fe.Map(w.Type(e),"Lowercase"),...t}}Never(e={}){return this.Create({...e,[l.Kind]:"Never",not:{}})}Not(e,t){return this.Create({...t,[l.Kind]:"Not",not:w.Type(e)})}Null(e={}){return this.Create({...e,[l.Kind]:"Null",type:"null"})}Number(e={}){return this.Create({...e,[l.Kind]:"Number",type:"number"})}Object(e,t={}){let r=Object.getOwnPropertyNames(e),a=r.filter(d=>f.TOptional(e[d])),s=r.filter(d=>!a.includes(d)),c=f.TSchema(t.additionalProperties)?{additionalProperties:w.Type(t.additionalProperties)}:{},p=r.reduce((d,b)=>({...d,[b]:w.Type(e[b])}),{});return s.length>0?this.Create({...t,...c,[l.Kind]:"Object",type:"object",properties:p,required:s}):this.Create({...t,...c,[l.Kind]:"Object",type:"object",properties:p})}Omit(e,t,r={}){let a=Se.Resolve(t);return pe.Map(this.Discard(w.Type(e),["$id",l.Transform]),s=>{O.IsArray(s.required)&&(s.required=s.required.filter(c=>!a.includes(c)),s.required.length===0&&delete s.required);for(let c of Object.getOwnPropertyNames(s.properties))a.includes(c)&&delete s.properties[c];return this.Create(s)},r)}Partial(e,t={}){return pe.Map(this.Discard(w.Type(e),["$id",l.Transform]),r=>{let a=Object.getOwnPropertyNames(r.properties).reduce((s,c)=>({...s,[c]:this.Optional(r.properties[c])}),{});return this.Object(a,this.Discard(r,["required"]))},t)}Pick(e,t,r={}){let a=Se.Resolve(t);return pe.Map(this.Discard(w.Type(e),["$id",l.Transform]),s=>{O.IsArray(s.required)&&(s.required=s.required.filter(c=>a.includes(c)),s.required.length===0&&delete s.required);for(let c of Object.getOwnPropertyNames(s.properties))a.includes(c)||delete s.properties[c];return this.Create(s)},r)}Record(e,t,r={}){return f.TTemplateLiteral(e)?(()=>{let a=de.ParseExact(e.pattern);return Te.Check(a)?this.Object([...ye.Generate(a)].reduce((s,c)=>({...s,[c]:w.Type(t)}),{}),r):this.Create({...r,[l.Kind]:"Record",type:"object",patternProperties:{[e.pattern]:w.Type(t)}})})():f.TUnion(e)?(()=>{let a=jn.Resolve(e);if(f.TUnionLiteral(a)){let s=a.anyOf.reduce((c,p)=>({...c,[p.const]:w.Type(t)}),{});return this.Object(s,{...r,[l.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():f.TLiteral(e)?O.IsString(e.const)||O.IsNumber(e.const)?this.Object({[e.const]:w.Type(t)},r):this.Throw("Record key of type literal is not of type string or number"):f.TInteger(e)||f.TNumber(e)?this.Create({...r,[l.Kind]:"Record",type:"object",patternProperties:{[l.PatternNumberExact]:w.Type(t)}}):f.TString(e)?(()=>{let a=O.IsUndefined(e.pattern)?l.PatternStringExact:e.pattern;return this.Create({...r,[l.Kind]:"Record",type:"object",patternProperties:{[a]:w.Type(t)}})})():this.Never()}Recursive(e,t={}){O.IsUndefined(t.$id)&&(t.$id=`T${_t++}`);let r=e({[l.Kind]:"This",$ref:`${t.$id}`});return r.$id=t.$id,this.Create({...t,[l.Hint]:"Recursive",...r})}Ref(e,t={}){return O.IsString(e)?this.Create({...t,[l.Kind]:"Ref",$ref:e}):(O.IsUndefined(e.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...t,[l.Kind]:"Ref",$ref:e.$id}))}Required(e,t={}){return pe.Map(this.Discard(w.Type(e),["$id",l.Transform]),r=>{let a=Object.getOwnPropertyNames(r.properties).reduce((s,c)=>({...s,[c]:this.Discard(r.properties[c],[l.Optional])}),{});return this.Object(a,r)},t)}Rest(e){return f.TTuple(e)&&!O.IsUndefined(e.items)?w.Rest(e.items):f.TIntersect(e)?w.Rest(e.allOf):f.TUnion(e)?w.Rest(e.anyOf):[]}String(e={}){return this.Create({...e,[l.Kind]:"String",type:"string"})}TemplateLiteral(e,t={}){let r=O.IsString(e)?We.Create(Rn.Parse(e)):We.Create(e);return this.Create({...t,[l.Kind]:"TemplateLiteral",type:"string",pattern:r})}Transform(e){return new Ze(e)}Tuple(e,t={}){let[r,a,s]=[!1,e.length,e.length],c=w.Rest(e),p=e.length>0?{...t,[l.Kind]:"Tuple",type:"array",items:c,additionalItems:r,minItems:a,maxItems:s}:{...t,[l.Kind]:"Tuple",type:"array",minItems:a,maxItems:s};return this.Create(p)}Uncapitalize(e,t={}){return{...fe.Map(w.Type(e),"Uncapitalize"),...t}}Union(e,t={}){return f.TTemplateLiteral(e)?Q.Resolve(e):(()=>{let r=e;if(r.length===0)return this.Never(t);if(r.length===1)return this.Create(w.Type(r[0],t));let a=w.Rest(r);return this.Create({...t,[l.Kind]:"Union",anyOf:a})})()}Unknown(e={}){return this.Create({...e,[l.Kind]:"Unknown"})}Unsafe(e={}){return this.Create({...e,[l.Kind]:e[l.Kind]||"Unsafe"})}Uppercase(e,t={}){return{...fe.Map(w.Type(e),"Uppercase"),...t}}};l.JsonTypeBuilder=Ee;var en=class extends Ee{AsyncIterator(e,t={}){return this.Create({...t,[l.Kind]:"AsyncIterator",type:"AsyncIterator",items:w.Type(e)})}Awaited(e,t={}){let r=a=>a.length>0?(()=>{let[s,...c]=a;return[this.Awaited(s),...r(c)]})():a;return f.TIntersect(e)?l.Type.Intersect(r(e.allOf)):f.TUnion(e)?l.Type.Union(r(e.anyOf)):f.TPromise(e)?this.Awaited(e.item):w.Type(e,t)}BigInt(e={}){return this.Create({...e,[l.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(e,t={}){return this.Tuple([...e.parameters],{...t})}Constructor(e,t,r){let[a,s]=[w.Rest(e),w.Type(t)];return this.Create({...r,[l.Kind]:"Constructor",type:"Constructor",parameters:a,returns:s})}Date(e={}){return this.Create({...e,[l.Kind]:"Date",type:"Date"})}Function(e,t,r){let[a,s]=[w.Rest(e),w.Type(t)];return this.Create({...r,[l.Kind]:"Function",type:"Function",parameters:a,returns:s})}InstanceType(e,t={}){return w.Type(e.returns,t)}Iterator(e,t={}){return this.Create({...t,[l.Kind]:"Iterator",type:"Iterator",items:w.Type(e)})}Parameters(e,t={}){return this.Tuple(e.parameters,{...t})}Promise(e,t={}){return this.Create({...t,[l.Kind]:"Promise",type:"Promise",item:w.Type(e)})}RegExp(e,t={}){let r=O.IsString(e)?e:e.source;return this.Create({...t,[l.Kind]:"String",type:"string",pattern:r})}RegEx(e,t={}){return this.RegExp(e,t)}ReturnType(e,t={}){return w.Type(e.returns,t)}Symbol(e){return this.Create({...e,[l.Kind]:"Symbol",type:"symbol"})}Undefined(e={}){return this.Create({...e,[l.Kind]:"Undefined",type:"undefined"})}Uint8Array(e={}){return this.Create({...e,[l.Kind]:"Uint8Array",type:"Uint8Array"})}Void(e={}){return this.Create({...e,[l.Kind]:"Void",type:"void"})}};l.JavaScriptTypeBuilder=en;l.JsonType=new Ee;l.Type=new en});var ut=xn((Qr,ot)=>{"use strict";function v(n){if(!(this instanceof v))return new v(n);this._=n}var U=v.prototype;function Jn(n,e){var t=0;for(t;t<n;t++)e(t)}function ht(n,e){Jn(e.length,function(t){n(e[t],t,e)})}function ue(n,e,t){return ht(function(r,a,s){e=n(e,r,a,s)},t),e}function G(n,e){return ue(function(t,r,a,s){return t.concat([n(r,a,s)])},[],e)}function qt(n){var e=ue(function(t,r,a,s){return t.concat(a===s.length-1?Buffer.from([r,0]).readUInt16BE(0):s.readUInt16BE(a))},[],n);return Buffer.from(G(function(t){return(t<<1&65535)>>8},e))}function Vt(n,e){var t={v:0,buf:e};return Jn(n,function(){t={v:t.v<<1|zt(t.buf),buf:qt(t.buf)}}),t}function zt(n){return n[0]>>7}function Jt(n){return ue(function(e,t){return e+t},0,n)}function Wt(n,e){return ue(function(t,r){return t||(n(r)?r:t)},null,e)}function Wn(){return typeof Buffer<"u"}function Ht(){if(v._supportsSet!==void 0)return v._supportsSet;var n=typeof Set<"u";return v._supportsSet=n,n}function ln(){if(!Wn())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function Hn(n){ln();var e=Jt(n);if(e%8!==0)throw new Error("The bits ["+n.join(", ")+"] add up to "+e+" which is not an even number of bytes; the total should be divisible by 8");var t=e/8,r=Wt(function(a){return a>48},n);if(r)throw new Error(r+" bit range requested exceeds 48 bit (6 byte) Number max.");return new v(function(a,s){var c=t+s;return c>a.length?h(s,t.toString()+" bytes"):C(c,ue(function(p,d){var b=Vt(d,p.buf);return{coll:p.coll.concat(b.v),buf:b.buf}},{coll:[],buf:a.slice(s,c)},n).coll)})}function Qt(n){ln();var e={},t=0,r=G(function(c){if(me(c)){var p=c;if(p.length!==2)throw new Error("["+p.join(", ")+"] should be length 2, got length "+p.length);if(je(p[0]),ve(p[1]),Object.prototype.hasOwnProperty.call(e,p[0]))throw new Error("duplicate key in bitSeqObj: "+p[0]);return e[p[0]]=!0,t++,p}else return ve(c),[null,c]},n);if(t<1)throw new Error("bitSeqObj expects at least one named pair, got ["+n.join(", ")+"]");var a=G(function(c){return c[0]},r),s=G(function(c){return c[1]},r);return Hn(s).map(function(c){var p=G(function(d,b){return[d,c[b]]},a);return ue(function(d,b){return b[0]!==null&&(d[b[0]]=b[1]),d},{},p)})}function W(n,e){return new v(function(t,r){return ln(),r+e>t.length?h(r,e+" bytes for "+n):C(r+e,t.slice(r,r+e))})}function Zt(n){return W("buffer",n).map(function(e){return Buffer.from(e)})}function Yt(n,e){return W("string",e).map(function(t){return t.toString(n)})}function Xt(n){return typeof n=="number"&&Math.floor(n)===n}function fn(n,e){if(!Xt(e)||e<0||e>6)throw new Error(n+" requires integer length in range [0, 6].")}function nn(n){return fn("uintBE",n),W("uintBE("+n+")",n).map(function(e){return e.readUIntBE(0,n)})}function tn(n){return fn("uintLE",n),W("uintLE("+n+")",n).map(function(e){return e.readUIntLE(0,n)})}function rn(n){return fn("intBE",n),W("intBE("+n+")",n).map(function(e){return e.readIntBE(0,n)})}function on(n){return fn("intLE",n),W("intLE("+n+")",n).map(function(e){return e.readIntLE(0,n)})}function Gt(){return W("floatBE",4).map(function(n){return n.readFloatBE(0)})}function er(){return W("floatLE",4).map(function(n){return n.readFloatLE(0)})}function nr(){return W("doubleBE",8).map(function(n){return n.readDoubleBE(0)})}function tr(){return W("doubleLE",8).map(function(n){return n.readDoubleLE(0)})}function rr(n){return Array.prototype.slice.call(n)}function Re(n){return n instanceof v}function me(n){return{}.toString.call(n)==="[object Array]"}function Le(n){return Wn()&&Buffer.isBuffer(n)}function C(n,e){return{status:!0,index:n,value:e,furthest:-1,expected:[]}}function h(n,e){return me(e)||(e=[e]),{status:!1,index:-1,value:null,furthest:n,expected:e}}function V(n,e){if(!e||n.furthest>e.furthest)return n;var t=n.furthest===e.furthest?ir(n.expected,e.expected):e.expected;return{status:n.status,index:n.index,value:n.value,furthest:e.furthest,expected:t}}var sn={};function Qn(n,e){if(Le(n))return{offset:e,line:-1,column:-1};n in sn||(sn[n]={});for(var t=sn[n],r=0,a=0,s=0,c=e;c>=0;){if(c in t){r=t[c].line,s===0&&(s=t[c].lineStart);break}(n.charAt(c)===`
`||n.charAt(c)==="\r"&&n.charAt(c+1)!==`
`)&&(a++,s===0&&(s=c+1)),c--}var p=r+a,d=e-s;return t[e]={line:p,lineStart:s},{offset:e,line:p+1,column:d+1}}function ir(n,e){if(Ht()&&Array.from){for(var t=new Set(n),r=0;r<e.length;r++)t.add(e[r]);var a=Array.from(t);return a.sort(),a}for(var s={},c=0;c<n.length;c++)s[n[c]]=!0;for(var p=0;p<e.length;p++)s[e[p]]=!0;var d=[];for(var b in s)({}).hasOwnProperty.call(s,b)&&d.push(b);return d.sort(),d}function be(n){if(!Re(n))throw new Error("not a parser: "+n)}function pn(n,e){return typeof n=="string"?n.charAt(e):n[e]}function or(n){if(!me(n))throw new Error("not an array: "+n)}function ve(n){if(typeof n!="number")throw new Error("not a number: "+n)}function ur(n){if(!(n instanceof RegExp))throw new Error("not a regexp: "+n);for(var e=Yn(n),t=0;t<e.length;t++){var r=e.charAt(t);if(r!=="i"&&r!=="m"&&r!=="u"&&r!=="s")throw new Error('unsupported regexp flag "'+r+'": '+n)}}function oe(n){if(typeof n!="function")throw new Error("not a function: "+n)}function je(n){if(typeof n!="string")throw new Error("not a string: "+n)}var sr=2,ar=3,ee=8,cr=ee*5,lr=ee*4,Vn="  ";function an(n,e){return new Array(e+1).join(n)}function fr(n){return n.length===1?`Expected:

`+n[0]:`Expected one of the following: 

`+n.join(", ")}function un(n,e,t){var r=e-n.length;return r<=0?n:an(t,r)+n}function pr(n,e){var t=n.length,r=[],a=0;if(t<=e)return[n.slice()];for(var s=0;s<t;s++)r[a]||r.push([]),r[a].push(n[s]),(s+1)%e===0&&a++;return r}function zn(n,e,t,r){return{from:n-e>0?n-e:0,to:n+t>r?r:n+t}}function dr(n){return n.from===0&&n.to===1?{from:n.from,to:n.to}:{from:n.from/ee,to:Math.floor(n.to/ee)}}function Tr(n,e){var t=e.index,r=t.offset,a=1,s,c,p,d,b;if(r===n.length)return"Got the end of the input";if(Le(n)){var m=r-r%ee,g=r-m,P=zn(m,cr,lr+ee,n.length),y=n.slice(P.from,P.to),I=pr(y.toJSON().data,ee),S=G(function(A){return G(function($){return un($.toString(16),2,"0")},A)},I);d=dr(P),c=m/ee,s=g*3,g>=4&&(s+=1),a=2,p=G(function(A){return A.length<=4?A.join(" "):A.slice(0,4).join(" ")+"  "+A.slice(4).join(" ")},S),b=((d.to>0?d.to-1:d.to)*8).toString(16).length,b<2&&(b=2)}else{var E=n.split(/\r\n|[\n\r\u2028\u2029]/);s=t.column-1,c=t.line-1,d=zn(c,sr,ar,E.length),p=E.slice(d.from,d.to),b=d.to.toString().length}var R=c-d.from;Le(n)&&(b=((d.to>0?d.to-1:d.to)*8).toString(16).length,b<2&&(b=2));var j=ue(function(A,$,Y){var L=Y===R,ne=L?"> ":Vn,H;return Le(n)?H=un(((d.from+Y)*8).toString(16),b,"0"):H=un((d.from+Y+1).toString(),b," "),[].concat(A,[ne+H+" | "+$],L?[Vn+an(" ",b)+" | "+un("",s," ")+an("^",a)]:[])},[],p);return j.join(`
`)}function Zn(n,e){return[`
`,"-- PARSING FAILED "+an("-",50),`

`,Tr(n,e),`

`,fr(e.expected),`
`].join("")}function Yn(n){return n.flags!==void 0?n.flags:[n.global?"g":"",n.ignoreCase?"i":"",n.multiline?"m":"",n.unicode?"u":"",n.sticky?"y":""].join("")}function yr(n){return RegExp("^(?:"+n.source+")",Yn(n))}function dn(){for(var n=[].slice.call(arguments),e=n.length,t=0;t<e;t+=1)be(n[t]);return v(function(r,a){for(var s,c=new Array(e),p=0;p<e;p+=1){if(s=V(n[p]._(r,a),s),!s.status)return s;c[p]=s.value,a=s.index}return V(C(a,c),s)})}function gr(){for(var n={},e=0,t=rr(arguments),r=t.length,a=0;a<r;a+=1){var s=t[a];if(!Re(s)){if(me(s)){var c=s.length===2&&typeof s[0]=="string"&&Re(s[1]);if(c){var p=s[0];if(Object.prototype.hasOwnProperty.call(n,p))throw new Error("seqObj: duplicate key "+p);n[p]=!0,e++;continue}}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(e===0)throw new Error("seqObj expects at least one named parser, found zero");return v(function(d,b){for(var m,g={},P=0;P<r;P+=1){var y,I;if(me(t[P])?(y=t[P][0],I=t[P][1]):(y=null,I=t[P]),m=V(I._(d,b),m),!m.status)return m;y&&(g[y]=m.value),b=m.index}return V(C(b,g),m)})}function se(){var n=[].slice.call(arguments);if(n.length===0)throw new Error("seqMap needs at least one argument");var e=n.pop();return oe(e),dn.apply(null,n).map(function(t){return e.apply(null,t)})}function mr(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&function(r){var a=function(){return n[r](e)};e[r]=et(a)}(t);return e}function Tn(){var n=[].slice.call(arguments),e=n.length;if(e===0)return yn("zero alternates");for(var t=0;t<e;t+=1)be(n[t]);return v(function(r,a){for(var s,c=0;c<n.length;c+=1)if(s=V(n[c]._(r,a),s),s.status)return s;return s})}function Xn(n,e){return An(n,e).or(ae([]))}function An(n,e){be(n),be(e);var t=e.then(n).many();return se(n,t,function(r,a){return[r].concat(a)})}U.parse=function(n){if(typeof n!="string"&&!Le(n))throw new Error(".parse must be called with a string or Buffer as its argument");var e=this.skip(Bn)._(n,0),t;return e.status?t={status:!0,value:e.value}:t={status:!1,index:Qn(n,e.furthest),expected:e.expected},delete sn[n],t};U.tryParse=function(n){var e=this.parse(n);if(e.status)return e.value;var t=Zn(n,e),r=new Error(t);throw r.type="ParsimmonError",r.result=e,r};U.assert=function(n,e){return this.chain(function(t){return n(t)?ae(t):yn(e)})};U.or=function(n){return Tn(this,n)};U.trim=function(n){return this.wrap(n,n)};U.wrap=function(n,e){return se(n,this,e,function(t,r){return r})};U.thru=function(n){return n(this)};U.then=function(n){return be(n),dn(this,n).map(function(e){return e[1]})};U.many=function(){var n=this;return v(function(e,t){for(var r=[],a=void 0;;)if(a=V(n._(e,t),a),a.status){if(t===a.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");t=a.index,r.push(a.value)}else return V(C(t,r),a)})};U.tieWith=function(n){return je(n),this.map(function(e){if(or(e),e.length){je(e[0]);for(var t=e[0],r=1;r<e.length;r++)je(e[r]),t+=n+e[r];return t}else return""})};U.tie=function(){return this.tieWith("")};U.times=function(n,e){var t=this;return arguments.length<2&&(e=n),ve(n),ve(e),v(function(r,a){for(var s=[],c=void 0,p=void 0,d=0;d<n;d+=1)if(c=t._(r,a),p=V(c,p),c.status)a=c.index,s.push(c.value);else return p;for(;d<e&&(c=t._(r,a),p=V(c,p),c.status);d+=1)a=c.index,s.push(c.value);return V(C(a,s),p)})};U.result=function(n){return this.map(function(){return n})};U.atMost=function(n){return this.times(0,n)};U.atLeast=function(n){return se(this.times(n),this.many(),function(e,t){return e.concat(t)})};U.map=function(n){oe(n);var e=this;return v(function(t,r){var a=e._(t,r);return a.status?V(C(a.index,n(a.value)),a):a})};U.contramap=function(n){oe(n);var e=this;return v(function(t,r){var a=e.parse(n(t.slice(r)));return a.status?C(r+t.length,a.value):a})};U.promap=function(n,e){return oe(n),oe(e),this.contramap(n).map(e)};U.skip=function(n){return dn(this,n).map(function(e){return e[0]})};U.mark=function(){return se(Ne,this,Ne,function(n,e,t){return{start:n,value:e,end:t}})};U.node=function(n){return se(Ne,this,Ne,function(e,t,r){return{name:n,value:t,start:e,end:r}})};U.sepBy=function(n){return Xn(this,n)};U.sepBy1=function(n){return An(this,n)};U.lookahead=function(n){return this.skip(cn(n))};U.notFollowedBy=function(n){return this.skip(Gn(n))};U.desc=function(n){me(n)||(n=[n]);var e=this;return v(function(t,r){var a=e._(t,r);return a.status||(a.expected=n),a})};U.fallback=function(n){return this.or(ae(n))};U.ap=function(n){return se(n,this,function(e,t){return e(t)})};U.chain=function(n){var e=this;return v(function(t,r){var a=e._(t,r);if(!a.status)return a;var s=n(a.value);return V(s._(t,a.index),a)})};function Ae(n){je(n);var e="'"+n+"'";return v(function(t,r){var a=r+n.length,s=t.slice(r,a);return s===n?C(a,s):h(r,e)})}function br(n){if(ln(),ve(n),n>255)throw new Error("Value specified to byte constructor ("+n+"=0x"+n.toString(16)+") is larger in value than a single byte.");var e=(n>15?"0x":"0x0")+n.toString(16);return v(function(t,r){var a=pn(t,r);return a===n?C(r+1,a):h(r,e)})}function Z(n,e){ur(n),arguments.length>=2?ve(e):e=0;var t=yr(n),r=""+n;return v(function(a,s){var c=t.exec(a.slice(s));if(c){if(0<=e&&e<=c.length){var p=c[0],d=c[e];return C(s+p.length,d)}var b="valid match group (0 to "+c.length+") in "+r;return h(s,b)}return h(s,r)})}function ae(n){return v(function(e,t){return C(t,n)})}function yn(n){return v(function(e,t){return h(t,n)})}function cn(n){if(Re(n))return v(function(e,t){var r=n._(e,t);return r.index=t,r.value="",r});if(typeof n=="string")return cn(Ae(n));if(n instanceof RegExp)return cn(Z(n));throw new Error("not a string, regexp, or parser: "+n)}function Gn(n){return be(n),v(function(e,t){var r=n._(e,t),a=e.slice(t,r.index);return r.status?h(t,'not "'+a+'"'):C(t,null)})}function gn(n){return oe(n),v(function(e,t){var r=pn(e,t);return t<e.length&&n(r)?C(t+1,r):h(t,"a character/byte matching "+n)})}function vr(n){for(var e=n.split(""),t=0;t<e.length;t++)e[t]="'"+e[t]+"'";return gn(function(r){return n.indexOf(r)>=0}).desc(e)}function Or(n){return gn(function(e){return n.indexOf(e)<0}).desc("none of '"+n+"'")}function Ir(n){return v(n(C,h))}function Pr(n,e){return gn(function(t){return n<=t&&t<=e}).desc(n+"-"+e)}function wr(n){return oe(n),v(function(e,t){for(var r=t;r<e.length&&n(pn(e,r));)r++;return C(r,e.slice(t,r))})}function et(n,e){arguments.length<2&&(e=n,n=void 0);var t=v(function(r,a){return t._=e()._,t._(r,a)});return n?t.desc(n):t}function Fn(){return yn("fantasy-land/empty")}U.concat=U.or;U.empty=Fn;U.of=ae;U["fantasy-land/ap"]=U.ap;U["fantasy-land/chain"]=U.chain;U["fantasy-land/concat"]=U.concat;U["fantasy-land/empty"]=U.empty;U["fantasy-land/of"]=U.of;U["fantasy-land/map"]=U.map;var Ne=v(function(n,e){return C(e,Qn(n,e))}),xr=v(function(n,e){return e>=n.length?h(e,"any character/byte"):C(e+1,pn(n,e))}),Sr=v(function(n,e){return C(n.length,n.slice(e))}),Bn=v(function(n,e){return e<n.length?h(e,"EOF"):C(e,null)}),Ur=Z(/[0-9]/).desc("a digit"),Er=Z(/[0-9]*/).desc("optional digits"),Lr=Z(/[a-z]/i).desc("a letter"),jr=Z(/[a-z]*/i).desc("optional letters"),Rr=Z(/\s*/).desc("optional whitespace"),Nr=Z(/\s+/).desc("whitespace"),nt=Ae("\r"),tt=Ae(`
`),rt=Ae(`\r
`),it=Tn(rt,tt,nt).desc("newline"),Ar=Tn(it,Bn);v.all=Sr;v.alt=Tn;v.any=xr;v.cr=nt;v.createLanguage=mr;v.crlf=rt;v.custom=Ir;v.digit=Ur;v.digits=Er;v.empty=Fn;v.end=Ar;v.eof=Bn;v.fail=yn;v.formatError=Zn;v.index=Ne;v.isParser=Re;v.lazy=et;v.letter=Lr;v.letters=jr;v.lf=tt;v.lookahead=cn;v.makeFailure=h;v.makeSuccess=C;v.newline=it;v.noneOf=Or;v.notFollowedBy=Gn;v.of=ae;v.oneOf=vr;v.optWhitespace=Rr;v.Parser=v;v.range=Pr;v.regex=Z;v.regexp=Z;v.sepBy=Xn;v.sepBy1=An;v.seq=dn;v.seqMap=se;v.seqObj=gr;v.string=Ae;v.succeed=ae;v.takeWhile=wr;v.test=gn;v.whitespace=Nr;v["fantasy-land/empty"]=Fn;v["fantasy-land/of"]=ae;v.Binary={bitSeq:Hn,bitSeqObj:Qt,byte:br,buffer:Zt,encodedString:Yt,uintBE:nn,uint8BE:nn(1),uint16BE:nn(2),uint32BE:nn(4),uintLE:tn,uint8LE:tn(1),uint16LE:tn(2),uint32LE:tn(4),intBE:rn,int8BE:rn(1),int16BE:rn(2),int32BE:rn(4),intLE:on,int8LE:on(1),int16LE:on(2),int32LE:on(4),floatBE:Gt(),floatLE:er(),doubleBE:nr(),doubleLE:tr()};ot.exports=v});var Tt=xn((Gr,dt)=>{dt.exports=Fe;Fe.flatten=Fe;Fe.unflatten=pt;function lt(n){return n&&n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function ft(n){return n}function Fe(n,e){e=e||{};let t=e.delimiter||".",r=e.maxDepth,a=e.transformKey||ft,s={};function c(p,d,b){b=b||1,Object.keys(p).forEach(function(m){let g=p[m],P=e.safe&&Array.isArray(g),y=Object.prototype.toString.call(g),I=lt(g),S=y==="[object Object]"||y==="[object Array]",E=d?d+t+a(m):a(m);if(!P&&!I&&S&&Object.keys(g).length&&(!e.maxDepth||b<r))return c(g,E,b+1);s[E]=g})}return c(n),s}function pt(n,e){e=e||{};let t=e.delimiter||".",r=e.overwrite||!1,a=e.transformKey||ft,s={};if(lt(n)||Object.prototype.toString.call(n)!=="[object Object]")return n;function p(m){let g=Number(m);return isNaN(g)||m.indexOf(".")!==-1||e.object?m:g}function d(m,g,P){return Object.keys(P).reduce(function(y,I){return y[m+t+I]=P[I],y},g)}function b(m){let g=Object.prototype.toString.call(m),P=g==="[object Array]",y=g==="[object Object]";if(m){if(P)return!m.length;if(y)return!Object.keys(m).length}else return!0}return n=Object.keys(n).reduce(function(m,g){let P=Object.prototype.toString.call(n[g]);return!(P==="[object Object]"||P==="[object Array]")||b(n[g])?(m[g]=n[g],m):d(g,m,Fe(n[g],e))},{}),Object.keys(n).forEach(function(m){let g=m.split(t).map(a),P=p(g.shift()),y=p(g[0]),I=s;for(;y!==void 0;){if(P==="__proto__")return;let S=Object.prototype.toString.call(I[P]),E=S==="[object Object]"||S==="[object Array]";if(!r&&!E&&typeof I[P]<"u")return;(r&&!E||!r&&I[P]==null)&&(I[P]=typeof y=="number"&&!e.object?[]:{}),I=I[P],g.length>0&&(P=p(g.shift()),y=p(g[0]))}I[P]=pt(n[m],e)}),s}});var D=Sn(Dn(),1),Nn=D.Type.String({pattern:"^(\\./|\\../|/)[^*]*\\{languageTag\\}[^*]*\\.json",title:"Path to language files",description:"Specify the pathPattern to locate language files in your repository. It must include `{languageTag}` and end with `.json`.",examples:["./{languageTag}/file.json","../folder/{languageTag}/file.json","./{languageTag}.json"]}),hn=D.Type.Record(D.Type.String({pattern:"^[^.]+$",description:"Dots are not allowd ",examples:["website","app","homepage"]}),Nn),qn=D.Type.Object({pathPattern:D.Type.Union([Nn,hn]),variableReferencePattern:D.Type.Optional(D.Type.Array(D.Type.String(),{title:"Variable reference pattern",description:"The pattern to match content in the messages. You can define an opening and closing pattern. The closing pattern is not required. The default is '{{' and '}}'.",examples:["{ and }","{{ and }}","< and >","@:"]})),sourceLanguageFilePath:D.Type.Optional(D.Type.Union([Nn,hn],{title:"Source language file path",description:"Sometimes it is necessary to specify the location of the source language file(s) when they do not follow the standard naming or file structure convention."})),ignore:D.Type.Optional(D.Type.Array(D.Type.String(),{title:"Ignore paths",description:"Set a path that should be ignored."}))});function ge(n,e,t){return n.replace(new RegExp(Dt(e),"g"),t)}function Dt(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var x=Sn(ut(),1),Fr=(n,e,t)=>x.default.createLanguage({entry:r=>x.default.alt(r.FunctionCall,x.default.any).many().map(a=>a.filter(s=>typeof s=="object")),stringLiteral:r=>x.default.alt(r.doubleQuotedString,r.singleQuotedString),doubleQuotedString:()=>x.default.string('"').then(x.default.regex(/[^"]*/)).skip(x.default.string('"')),singleQuotedString:()=>x.default.string("'").then(x.default.regex(/[^']*/)).skip(x.default.string("'")),whitespace:()=>x.default.optWhitespace,colon:r=>x.default.string(":").trim(r.whitespace),comma:r=>x.default.string(",").trim(r.whitespace),nsValue:r=>x.default.seq(r.whitespace,x.default.string("ns").trim(r.whitespace).skip(r.colon),r.stringLiteral.trim(r.whitespace)).map(([,,a])=>`${a}`),FunctionCall:function(r){return x.default.seqMap(x.default.regex(/[^a-zA-Z0-9]/),x.default.string("t"),x.default.string("("),x.default.index,r.stringLiteral,x.default.index,x.default.regex(/[^)]*/),x.default.string(")"),(a,s,c,p,d,b,m)=>{let P=r.comma.then(x.default.string("{")).trim(r.whitespace).then(r.nsValue).skip(x.default.string("}")).skip(x.default.regex(/[^)]*/)).trim(r.whitespace).parse(m).value;return typeof n.pathPattern=="object"&&(P?d=P+":"+(t?t+".":"")+d:d.includes(":")||(d=(e||Object.keys(n.pathPattern)[0])+":"+(t?t+".":"")+d)),{messageId:d,position:{start:{line:p.line,character:p.column},end:{line:b.line,character:b.column}}}})}}),st=n=>x.default.createLanguage({entry:e=>x.default.alt(e.FunctionCall,x.default.any).many().map(t=>t.filter(r=>typeof r=="object")),stringLiteral:e=>x.default.alt(e.doubleQuotedString,e.singleQuotedString),doubleQuotedString:()=>x.default.string('"').then(x.default.regex(/[^"]*/)).skip(x.default.string('"')),singleQuotedString:()=>x.default.string("'").then(x.default.regex(/[^']*/)).skip(x.default.string("'")),comma:e=>x.default.string(",").trim(e.whitespace),whitespace:()=>x.default.optWhitespace,colon:e=>x.default.string(":").trim(e.whitespace),keyPrefixValue:e=>x.default.seq(e.whitespace,x.default.string("keyPrefix").trim(e.whitespace).skip(e.colon),e.stringLiteral.trim(e.whitespace)).map(([,,t])=>`${t}`),FunctionCall:function(e){return x.default.seqMap(x.default.regex(/[^a-zA-Z0-9]/),x.default.regex(/\buseTranslations?\b/),x.default.string(n),x.default.index,e.stringLiteral,x.default.index,x.default.regex(/[^)]*/),x.default.string(")"),(t,r,a,s,c,p,d)=>{let m=e.comma.then(x.default.string("{")).trim(e.whitespace).then(e.keyPrefixValue).skip(x.default.string("}")).skip(x.default.regex(/[^)]*/)).trim(e.whitespace).parse(d).value;return{ns:c,keyPrefix:m}})}});function Br(n,e){if(typeof n.pathPattern=="object"){let r=st("(").entry.tryParse(e);if(r.length>0)return{ns:r[0].ns,keyPrefix:r[0].keyPrefix};{let s=st("([").entry.tryParse(e);return s.length>0?{ns:s[0].ns,keyPrefix:s[0].keyPrefix}:void 0}}else return}function at(n,e){try{let t=Br(e,n),r=t?.ns,a=t?.keyPrefix;return Fr(e,r,a).entry.tryParse(n)}catch{return[]}}var ct=n=>({"app.inlang.ideExtension":{messageReferenceMatchers:[async e=>at(e.documentText,n)],extractMessageOptions:[{callback:e=>({messageId:e.messageId,messageReplacement:`{t("${e.messageId}")}`})}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"}]}});var mn=Sn(Tt(),1);var gt={en:"i18next"},mt={en:"A plugin for inlang projects that works with i18next and reads + writes resources."};var Cr=n=>{let e=bt(n,0);if(e===void 0||!Kr(n[e]))return;let t=bt(n,e+1);if(t!==void 0)return kr(n,e,t)},vt=Cr,bt=(n,e)=>{for(let t=e;t<n.length;t+=1){let r=n[t];if(!$r(r))return t}},$r=n=>n===" "||n==="	"||n===`
`||n==="\r",Kr=n=>n==="{"||n==="[",kr=(n,e,t)=>{let r;for(let a=t-1;a>e;a-=1){let s=n[a];if(s==="\r")return;if(s===`
`)return Mr(r);if(r===void 0)r=s;else if(r[0]===s)r+=s;else return}},Mr=n=>n===void 0?0:n[0]===" "?n.length:n;var Cn=n=>{let e=n.endsWith(`
`),t=vt(n);return(r,a)=>JSON.stringify(r,a,t)+(e?`
`:"")};var xt,$n=!1,_r="plugin.inlang.i18next",St={id:_r,displayName:gt,description:mt,settingsSchema:qn,loadMessages:async({settings:n,nodeishFs:e})=>(n["plugin.inlang.i18next"].variableReferencePattern=n["plugin.inlang.i18next"].variableReferencePattern||["{{","}}"],Dr({settings:n,pluginSettings:n["plugin.inlang.i18next"],nodeishFs:e})),saveMessages:async({messages:n,settings:e,nodeishFs:t})=>(e["plugin.inlang.i18next"].variableReferencePattern=e["plugin.inlang.i18next"].variableReferencePattern||["{{","}}"],qr({pluginSettings:e["plugin.inlang.i18next"],nodeishFs:t,messages:n})),addCustomApi:({settings:n})=>ct(n["plugin.inlang.i18next"])};async function Dr(n){let e=[],t=hr(n.settings.languageTags,n.settings.sourceLanguageTag),r=50,a=[];for(let s=0;s<t.length;s+=r)a.push(t.slice(s,s+r));for(let s of a)await Promise.all(s.flatMap(c=>typeof n.pluginSettings.pathPattern!="string"?Object.entries(n.pluginSettings.pathPattern).map(([p,d])=>Ot(d,c,n.settings.sourceLanguageTag,n.nodeishFs,typeof n.pluginSettings.sourceLanguageFilePath=="object"&&c===n.settings.sourceLanguageTag?n.pluginSettings.sourceLanguageFilePath[p]:void 0).then(b=>{for(let[m,g]of Object.entries(b))if(Object.keys(g).length!==0){let P=p+":"+ge(m,"u002E",".");It(e,P,c,g,n.pluginSettings)}})):Ot(n.pluginSettings.pathPattern,c,n.settings.sourceLanguageTag,n.nodeishFs,typeof n.pluginSettings.sourceLanguageFilePath=="string"&&c===n.settings.sourceLanguageTag?n.pluginSettings.sourceLanguageFilePath:void 0).then(p=>{for(let[d,b]of Object.entries(p))Object.keys(b).length!==0&&It(e,ge(d,"u002E","."),c,b,n.pluginSettings)})));return e}async function Ot(n,e,t,r,a){typeof a>"u"&&(a=n.replace("{languageTag}",e));try{let s=await r.readFile(a,{encoding:"utf-8"});t===e&&(xt=Cn(s));let c=JSON.parse(s);return Object.values(c).some(d=>typeof d=="object")&&($n=!0),$n?(0,mn.flatten)(c,{transformKey:function(d){return ge(d,".","u002E")}}):c}catch(s){if(s.code==="FileNotFound"||s.code==="ENOENT")return{};throw s}}var hr=(n,e)=>{let t=n.filter(r=>r!==e);return t.unshift(e),t},It=(n,e,t,r,a)=>{let s=n.findIndex(c=>c.id===e);if(s!==-1){let c={languageTag:t,match:[],pattern:Pt(r,a.variableReferencePattern)};n[s]?.variants.push(c)}else{let c={id:e,alias:{},selectors:[],variants:[]};c.variants=[{languageTag:t,match:[],pattern:Pt(r,a.variableReferencePattern)}],n.push(c)}};function Pt(n,e){let t=e[1]?new RegExp(`(\\${e[0]}[^\\${e[1]}]+\\${e[1]})`,"g"):new RegExp(`(${e}\\w+)`,"g");return n.split(t).filter(a=>a!=="").map(a=>t.test(a)&&e[0]?{type:"VariableReference",name:e[1]?a.slice(e[0].length,-e[1].length):a.slice(e[0].length)}:{type:"Text",value:a})}async function qr(n){if(typeof n.pluginSettings.pathPattern=="object"){let e={};for(let t of n.messages)for(let r of t.variants){let a=t.id.includes(":")?t.id.split(":")[0]:Object.keys(n.pluginSettings.pathPattern)[0],s=t.id.replace(a+":","");e[r.languageTag]??={},e[r.languageTag][a]??={},e[r.languageTag][a][s]=r.pattern}for(let[t,r]of Object.entries(e)){for(let[a,s]of Object.entries(n.pluginSettings.pathPattern)){let c=typeof n.pluginSettings.sourceLanguageFilePath=="object"&&t===Object.keys(e)[0]?n.pluginSettings.sourceLanguageFilePath[a].split("/").slice(0,-1).join("/"):s.replace("{languageTag}",t).split("/").slice(0,-1).join("/");try{await n.nodeishFs.readdir(c)}catch{await n.nodeishFs.mkdir(c)}}for(let[a,s]of Object.entries(r)){let c=typeof n.pluginSettings.sourceLanguageFilePath=="object"&&t===Object.keys(e)[0]?n.pluginSettings.sourceLanguageFilePath[a]:n.pluginSettings.pathPattern[a].replace("{languageTag}",t);await n.nodeishFs.writeFile(c,wt(s,n.pluginSettings.variableReferencePattern))}}}else{let e={};for(let t of n.messages)for(let r of t.variants)e[r.languageTag]??={},e[r.languageTag][t.id]=r.pattern;for(let[t,r]of Object.entries(e)){let a=typeof n.pluginSettings.sourceLanguageFilePath=="string"&&t===Object.keys(e)[0]?n.pluginSettings.sourceLanguageFilePath:n.pluginSettings.pathPattern.replace("{languageTag}",t);try{await n.nodeishFs.readdir(a.split("/").slice(0,-1).join("/"))}catch{await n.nodeishFs.mkdir(a.split("/").slice(0,-1).join("/"),{recursive:!0})}await n.nodeishFs.writeFile(a,wt(r,n.pluginSettings.variableReferencePattern))}}}function wt(n,e){let t={};for(let[r,a]of Object.entries(n)){let s=ge(r,"..","u002E.");s.slice(-1)==="."&&(s=s.replace(/.$/,"u002E")),t[s]=Vr(a,e)}return $n&&(t=(0,mn.unflatten)(t,{object:!0})),ge(xt(t),"u002E",".")}function Vr(n,e){let t=[];for(let r of n)switch(r.type){case"Text":t.push(r.value);break;case"VariableReference":t.push(e[1]?`${e[0]}${r.name}${e[1]}`:`${e[0]}${r.name}`);break;default:throw new Error(`Unknown message pattern element of type: ${r?.type}`)}return t.join("")}var di=St;export{di as default};
